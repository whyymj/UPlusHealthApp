{"version":3,"sources":["webpack:///./src/components/association-request/associationRequest.js","webpack:///./src/components/association-request/associationRequest.vue?995a","webpack:///./src/components/association-request/associationRequest.vue"],"names":["associationRequest","name","data","visible","characterValue","message","pickerValue","dateSlots","mounted","this","getUserById","getRelationList","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","result","wrap","_context","prev","next","axios_default","post","phone","sent","code","nick_name","login_code","t0","console","log","stop","_this2","_callee2","_context2","get","splice","indexOf","map","_","dict_id","flex","values","className","textAlign","showCharacter","onChange","picker","confirm","dict_name","sendRequest","_this3","_callee3","obj","that","_context3","Object","mint_ui_common","abrupt","receive_code","$route","params","association","duration","msg","setTimeout","$router","push","path","association_request_associationRequest","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","rawName","value","expression","attrs","type","placeholder","domProps","on","input","$event","target","composing","click","_s","_m","closeOnClickModal","position","model","callback","$$v","slots","value-key","show-toolbar","change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/29.5fa3d680782664910f5d.js","sourcesContent":["import axios from 'axios'\nimport { Toast } from 'mint-ui'\n\nexport default {\n  name: 'associationRequest',\n  data () {\n    return {\n      visible: false,\n      characterValue: '',\n      message: '',\n      pickerValue: {},\n      dateSlots: []\n    }\n  },\n  mounted () {\n    this.getUserById()\n    this.getRelationList()\n  },\n  methods: {\n    async getUserById () {\n      try {\n        const result = await axios.post('/api/user/info', {phone: ''})\n        if (result.data.code === 'C0000') {\n          this.message = `我是${result.data.data.nick_name ? result.data.data.nick_name : result.data.data.login_code}`\n        }\n      } catch (err) {\n        console.log('err: ', err)\n      }\n    },\n    async getRelationList () {\n      // 获取家庭关系列表\n      try {\n        const result = await axios.get('/api/relation')\n        if (result.data.code === 'C0000') {\n          result.data.data.splice(result.data.data.indexOf(result.data.data.map(_ => {\n            return _.dict_id === '13'\n          }), 1))\n          this.dateSlots = [{\n            flex: 1,\n            values: result.data.data,\n            className: 'slot1',\n            textAlign: 'center'\n          }]\n          this.pickerValue = result.data.data[0]\n        }\n      } catch (err) {\n        console.log(err)\n      }\n    },\n    showCharacter () {\n      this.visible = true\n    },\n    onChange (picker, values) {\n      this.pickerValue = values[0]\n    },\n    confirm () {\n      this.characterValue = this.pickerValue.dict_name\n      this.visible = false\n    },\n    async sendRequest () {\n      if (this.message === '' || this.characterValue === '') {\n        Toast({\n          message: '信息不全'\n        })\n\n        return\n      }\n      let obj = {\n        receive_code: this.$route.params.phone,\n        message: this.message,\n        association: this.pickerValue.dict_id\n      }\n      try {\n        const result = await axios.post('/api/associate', obj)\n        const that = this\n        if (result.data.code === 'C0000') {\n          Toast({\n            message: '请求发送成功',\n            duration: 2000\n          })\n        } else {\n          Toast({\n            message: result.data.data.msg,\n            duration: 2000\n          })\n        }\n        setTimeout(function () {\n          that.$router.push({path: '/familyManagement'})\n        }, 2000)\n      } catch (err) {\n        Toast({\n          message: '网络有问题!',\n          className: 'no-results',\n          duration: 2000\n        })\n        console.log('Whoops: ', err)\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/association-request/associationRequest.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page associated-request\"},[_c('div',{staticClass:\"container white-bg has-footer\"},[_c('div',{staticClass:\"space\"}),_vm._v(\" \"),_c('div',{staticClass:\"tip\"},[_vm._v(\"您需要发送验证申请，等待对方通过\")]),_vm._v(\" \"),_c('div',{staticClass:\"send-msg\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入\"},domProps:{\"value\":(_vm.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"select-character clearfix\",on:{\"click\":_vm.showCharacter}},[_c('div',{staticClass:\"float-left\"},[_vm._v(\"亲友关系\")]),_vm._v(\" \"),_c('div',{staticClass:\"float-right\"},[_c('span',[_vm._v(_vm._s(_vm.characterValue))]),_c('i',{staticClass:\"fa fa-angle-right\"})])]),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('button',{staticClass:\"associated text-center\",on:{\"click\":_vm.sendRequest}},[_vm._v(\"发送请求\")])]),_vm._v(\" \"),_c('mt-popup',{staticClass:\"mint-datetime\",attrs:{\"closeOnClickModal\":true,\"position\":\"bottom\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('mt-picker',{staticClass:\"mint-datetime-picker\",attrs:{\"slots\":_vm.dateSlots,\"value-key\":\"dict_name\",\"show-toolbar\":\"\"},on:{\"change\":_vm.onChange}},[_c('span',{staticClass:\"mint-datetime-action mint-datetime-cancel\",on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('span',{staticClass:\"mint-datetime-action mint-datetime-confirm\",on:{\"click\":_vm.confirm}},[_vm._v(\"确定\")])])],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"notification\"},[_c('h3',[_vm._v(\"提示\")]),_vm._v(\" \"),_c('div',{staticClass:\"first-text\"},[_vm._v(\"1.添加亲友后可以查看对方健康数据；\")]),_vm._v(\" \"),_c('div',[_vm._v(\"2.除查看数据外，您无法对亲友进行其他操作；\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2d976224\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/association-request/associationRequest.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2d976224\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./associationRequest.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!./associationRequest.js\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!./associationRequest.js\"/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d976224\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./associationRequest.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2d976224\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/association-request/associationRequest.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}